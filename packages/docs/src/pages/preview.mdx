import React from 'react'
import { isMobile } from '@oplayer/core'
import Player from '@oplayer/react'
import hls from '@oplayer/hls'
import dash from '@oplayer/dash'
import mpegts from '@oplayer/mpegts'
import ui from '@oplayer/ui'
import danmaku from '@oplayer/danmaku'
import { PlaylistPlugin, Chromecast, AirPlay } from '@oplayer/plugins'

<div className="nx-rounded-sm nx-overflow-hidden" style={{ maxWidth: '1024px', margin: '1.25rem auto' }}>
  <Player
    onEvent={(payload) => {
      console.log(payload)
    }}
    plugins={[
      ui({
        theme: {
          controller: { header: true },
          progress: { position: 'top' }
        },
        pictureInPicture: true,
        menu: [
          {
            name: 'â¤',
            position: 'top',
            onClick() {
              alert('miss u')
            }
          },
          {
            name: 'ðŸ’•',
            position: 'top',
            children: [
              {
                name: 'ðŸ“',
                value: 'ðŸ“'
              },
              {
                name: 'ðŸ‰',
                value: 'ðŸ‰'
              },
              {
                name: 'ðŸŽ',
                value: 'ðŸŽ'
              }
            ],
            onChange({ value }) {
              alert(`${value}`)
            }
          },
        ]
      }),
      hls({ forceHLS: true }),
      dash(),
      mpegts(),
      !isMobile && danmaku({ enable: false, source: '/danmaku.xml', fontSize: 0.75, displaySender: false }),
      new PlaylistPlugin({
        initialIndex: 0,
        autoNext: true,
        sources: [
          {
            title: 'å›ã®åã¯ - MP4',
            src: '/å›ã®åã¯.mp4',
            poster: '/poster.png',
            duration: '01:32',
            thumbnails: {
              src: '/thumbnails.jpg',
              number: 100
            },
            danmaku: '/danmaku.xml',
            subtitles: [
              {
                name: 'Japanese',
                default: true,
                src: '/å›ã®åã¯-jp.srt',
                offset: 2
              },
              {
                name: 'CH & JP',
                src: '/å›ã®åã¯.srt',
                offset: 2
              }
            ],
            highlights: [
              {
                time: 12,
                text: 'è°ã§ã‚‚ã„ã„ã¯ãšãªã®ã«'
              },
              {
                time: 34,
                text: 'å¤ã®æƒ³ã„å‡ºãŒã¾ã‚ã‚‹'
              },
              {
                time: 58,
                text: 'ã“ã‚“ãªã¨ã“ã«ã‚ã‚‹ã¯ãšã‚‚ãªã„ã®ã«'
              },
              {
                time: 88,
                text: 'ï¼ï¼ç»ˆã‚ã‚Šï¼ï¼'
              }
            ]
          },
          {
            title: 'Big Buck Bunny - HLS',
            src: 'https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8',
            duration: '10:34'
          },
          {
            title: 'DASH',
            src: 'https://dash.akamaized.net/akamai/bbb_30fps/bbb_30fps.mpd',
            duration: '10:34'
          },
          {
            title: 'FLV',
            src: '/op.flv',
            duration: '00:17'
          }
        ]
      }),
      new Chromecast(),
      new AirPlay()
    ].filter((it) => it?.apply)}

/>

</div>
